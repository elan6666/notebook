Phase 0 · 第 3 讲：IDE 配置与 Hello World (3/3)

🎯 本讲目标

1. **工具合体**：让 VS Code 自动识别你上一讲创建的 `.venv` 虚拟环境（否则代码会报红线）。

2. **编写代码**：写下标准且规范的 FastAPI "Hello World"。

3. **启动服务**：理解 `uvicorn` 指令，并在浏览器中看到自动生成的 API 文档。

--------------------------------------------------------------------------------

1. 用 VS Code 打开项目（不要只打开文件！）

很多新手习惯直接用编辑器打开 `main.py`，这是错误的。必须**打开整个项目文件夹**。

🛠️ 手把手操作

1. 确保你还在 PowerShell 的 `my_fastapi_project` 文件夹里。

2. 输入命令：

3. _(注意：__code_ _后面有个空格和点。这代表“用 VS Code 打开_**当前**_文件夹”。)_

4. 如果没反应，说明没装 VS Code 或没配 PATH。那就手动打开 VS Code -> 点击 "File" -> "Open Folder" -> 选择你的 `my_fastapi_project` 文件夹。

--------------------------------------------------------------------------------

2. 关键步骤：告诉 VS Code 使用虚拟环境

你之前在黑窗口里装了 FastAPI，但 VS Code 不知道。我们需要把它们“连”起来。

🛠️ 手把手操作

1. 在 VS Code 中，打开一个 `.py` 文件（如果没有，右键左侧空白处 -> New File -> `main.py`）。

2. **看右下角**：你可能会看到 Python 版本号（例如 `3.10.x`）。点击它。

    ◦ _或者按快捷键_ _Ctrl + Shift + P__，输入_ _Python: Select Interpreter_ _并回车。_

3. **选择环境**：在弹出的列表中，找到包含 **('.venv': venv)** 字样的选项。

    ◦ _一定要选带_ _.venv_ _的那个！_ 这就是你在第 2 讲里辛苦建立的“无菌室”。

**✅ 成功标志**： 在 VS Code 打开 `main.py` 时，输入 `import fastapi`，如果不出现黄色波浪线报错，说明 VS Code 已经成功连接到了你的虚拟环境。

--------------------------------------------------------------------------------

3. 编写 Hello World

根据《Building Python Web APIs with FastAPI》的规范，我们来写一个最简应用。

🛠️ 代码编写

在 `main.py` 中输入以下代码（建议手敲一遍以增加记忆）：

```
from fastapi import FastAPI

# 1. 创建应用实例
app = FastAPI()

# 2. 定义路由 (Route)
# 当用户访问根路径 "/" 时，执行下面的函数
@app.get("/")
def read_root():
    return {"message": "Hello World", "status": "active"}
```

🧠 代码解析

• `@app.get("/")`：这是一个**装饰器**。它告诉 FastAPI：如果有 **GET** 请求访问 **/**，就请运行下面的函数。

• `return {...}`：你不需要手动把数据转成 JSON 格式，FastAPI 会自动帮你做这件事。

--------------------------------------------------------------------------------

4. 启动服务器 (Uvicorn)

代码写好了，它是静止的。我们需要用服务器软件 `uvicorn` 把它跑起来。

🛠️ 手把手操作

1. 在 VS Code 里，顶部菜单栏 -> **Terminal** -> **New Terminal**（这会在编辑器下方打开一个内置的 PowerShell）。

2. **检查环境**：确保新开的终端前面有 `(.venv)`。如果没有，参考第 2 讲重新激活。

3. 输入启动命令：

🧠 命令拆解

• `main`：你的文件名 (`main.py`)。

• `app`：你在代码里创建的变量名 (`app = FastAPI()`)。

• `--reload`：**开发神器**。意思是“只要我修改了代码保存，服务器就自动重启”，不用你每次手动停掉再开。

--------------------------------------------------------------------------------

5. 见证奇迹：API 文档

现在，打开你的浏览器。

🛠️ 两个网址

1. 访问 `http://127.0.0.1:8000`

    ◦ 你应该能看到：`{"message":"Hello World", "status":"active"}`

2. **重头戏**：访问 `http://127.0.0.1:8000/docs`

    ◦ 你会看到一个蓝绿色的页面（Swagger UI）。这是 FastAPI 自动根据你的代码生成的**交互式文档**。

    ◦ 点击绿色的 `GET /` -> 点击 `Try it out` -> 点击 `Execute`。

    ◦ 你不需要写前端页面，就可以直接在这里测试你的 API！

--------------------------------------------------------------------------------

✅ 本讲作业（Checklist）

请确认你完成了以下动作，Phase 0 就算完美通关了：

1. [ ] 在 VS Code 的终端里运行了 `uvicorn` 命令，且没有报错。

2. [ ] 修改 `main.py` 中的 `{"message": "Hello World"}` 为 `{"message": "你好 FastAPI"}`，按下 `Ctrl+S` 保存。

3. [ ] 观察终端，发现它自动显示 `Reloading...`。

4. [ ] 刷新浏览器，看到内容变成了中文。

--------------------------------------------------------------------------------

⏭️ 下一阶段预告：Phase 1 · 核心基础

恭喜！你已经拥有了一个专业的开发环境。 接下来的 **Phase 1**，我们将正式开始构建业务逻辑：

• **第 1 讲**：路径参数与查询参数——让 API 能接收用户的指令（比如 `items/5`）。

• **第 2 讲**：Pydantic 数据模型——不仅能收数据，还能自动检查数据对不对。

请告诉我当你准备好进入 **Phase 1 · 第 1 讲**！